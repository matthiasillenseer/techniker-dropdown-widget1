<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Store Dropdown</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 10px; }
    label { font-weight: bold; margin-bottom: 8px; display: block; }
    select { width: 100%; padding: 8px; font-size: 14px; }
  </style>
</head>
<body>
  <label for="storeSelect">Store auswählen:</label>
  <select id="storeSelect">
    <option value="">Bitte wählen</option>
  </select>

  <script>
    const storeSelect = document.getElementById('storeSelect');
    const storeList = window.parameters['storeList'] || [];

    // Dropdown Optionen befüllen
    storeList.forEach(item => {
      const option = document.createElement('option');
      option.value = item.key;
      option.textContent = `${item.key} – ${item.value}`;
      storeSelect.appendChild(option);
    });

    // Auswahl an Formular senden
    storeSelect.addEventListener('change', () => {
      const selected = storeSelect.value;
      if (window.parent && window.parent.postMessage) {
        window.parent.postMessage({
          type: 'setAnswer',
          value: selected
        }, '*');
      }
    });
  </script>
</body>
</html>
